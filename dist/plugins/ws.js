var __awaiter=this&&this.__awaiter||function(e,a,u,s){return new(u=u||Promise)(function(n,t){function o(e){try{r(s.next(e))}catch(e){t(e)}}function i(e){try{r(s.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(o,i)}r((s=s.apply(e,a||[])).next())})},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});let fastify_plugin_1=__importDefault(require("fastify-plugin"));exports.default=(0,fastify_plugin_1.default)(e=>__awaiter(void 0,void 0,void 0,function*(){let n=new(require("ws").Server)({server:e.server,path:"/ws"});e.decorate("ws",n),n.on("connection",e=>{console.log("connectioned"),e.on("message",t=>{n.clients.forEach(e=>{1===e.readyState&&e.send("hi from wildcard route : "+t)})})}),e.addHook("onClose",(e,t)=>{n.close(t),t()})}));
//# sourceMappingURL=ws.js.map
