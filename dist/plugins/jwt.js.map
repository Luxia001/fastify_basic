{"version":3,"sources":["../src/plugins/jwt.ts"],"names":["fastify_plugin_1","__importDefault","require","jwt_1","exports","default","__awaiter","fastify","register","secret","process","env","JWT_SECRET","decorate","request","reply","yield","jwtVerify","err","send"],"mappings":"sdAAA,IAAAA,iBAAAC,gBAAAC,QAAA,gBAAA,CAAA,EACAC,MAAAF,gBAAAC,QAAA,cAAA,CAAA,EAGAE,QAAAC,SAAe,EAAAL,iBAAAK,SAAG,GAAuBC,UAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,YACvCC,EAAQC,SAASL,MAAAE,QAAY,CAC3BI,OAAQC,QAAQC,IAAIC,YAAc,gB,CACnC,EAEDL,EAAQM,SACN,eACA,CAAOC,EAAyBC,IAAuBT,UAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,YACrD,IACEU,MAAMF,EAAQG,UAAS,CAGzB,CAFE,MAAOC,GACPH,EAAMI,KAAKD,CAAG,CAChB,CACF,CAAC,CAAA,CAEL,CAAC,CAAA","file":"jwt.js","sourcesContent":["import fp from \"fastify-plugin\";\r\nimport fastifyJwt from \"@fastify/jwt\";\r\nimport { FastifyReply, FastifyRequest } from \"fastify\";\r\n\r\nexport default fp(async (fastify: any) => {\r\n  fastify.register(fastifyJwt, {\r\n    secret: process.env.JWT_SECRET || \"default_secret\",\r\n  });\r\n\r\n  fastify.decorate(\r\n    \"authenticate\",\r\n    async (request: FastifyRequest, reply: FastifyReply) => {\r\n      try {\r\n        await request.jwtVerify();\r\n      } catch (err) {\r\n        reply.send(err);\r\n      }\r\n    }\r\n  );\r\n});\r\n"]}